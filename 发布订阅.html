<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div id="box"></div>
</body>
<script>
    let oBox=document.getElementById("box");
    console.log(oBox);
    function xi() {
        console.log("xi");
    }
    function xiao() {
        console.log("xiao");
    }
    function chao() {
        console.log("chao");
    }
    setTimeout(function () {
        run.call(oBox,"cc");
    },2000);

    function on(curEle,type,fn) {
        if(!curEle[type]){
            curEle[type]=[];
        }
        let ary=curEle[type];
        for (let i = 0; i < ary.length; i++) {
            if(fn===ary[i]){
                return;
            }
        }
        ary.push(fn);
        console.log(ary);
    }
    function run(type) {
        let ary=this[type];
        for (let i = 0; i < ary.length; i++) {
            if(typeof  ary[i]==="function"){
                ary[i].call(this);
            }
        }
        console.log(ary);
    }
    function off(curEle,type,fn) {
        let ary=curEle[type];
        for (let i = 0; i < ary.length; i++) {
           if(fn===ary[i]){
                ary[i]=null;
           }
        }
        console.log(ary);
    }
    on(oBox,"cc",xi);
    on(oBox,"cc",xiao);
    on(oBox,"cc",chao);
    off(oBox,"cc",xiao);
</script>
</html>